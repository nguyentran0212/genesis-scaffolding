name: "Sample Multi-Step Agent Workflow"
description: "A sample multi-step writing workflow."
version: "1.0"

inputs:
  writing_topic:
    type: "string"
    description: "The topic you want the agent to write about."
    default: "Python monorepo."
  content_length:
    type: "int"
    description: "Target word count."
    default: 500
  input_files:
    type: "list[string]"
    description: "List of files to provide to the agent."
    default: []

steps:
  - id: "file_ingest_step"
    type: "file_ingest"
    params:
      files_to_read: "{{ inputs.input_files }}"

  - id: "agent_outline"
    type: "prompt_agent"
    params:
      agent: "technical_writer_outline"
      prompt: |
        Create a detailed outline for a technical article about {{ inputs.writing_topic }}.
        Ensure it is structured for a {{ inputs.content_length }} word article.
        Only write the content of the outline in your output.
      output_filename: "agent_outline.md"

  - id: "agent_drafting"
    type: "prompt_agent"
    params:
      agent: "technical_writer_draft"
      files_to_read:
        - "internal/agent_outline.md"
      prompt: |
        Please write the article based on the outine provided in your clipboard. 
        Target length is {{ inputs.content_length }} words. 
      output_filename: "agent_draft.md"

  - id: "agent_editing"
    type: "prompt_agent"
    params:
      agent: "technical_writer_editor"
      files_to_read:
        - "internal/agent_outline.md"
        - "internal/agent_draft.md"
      prompt: |
        Review and polish the paper draft provided in your clipboard.
        The draft is supposed to follow the outline, which is also provided in your clipboard
        Target length is {{ inputs.content_length }} words. 
      output_filename: "agent_final.md"

  - id: "agent_twitter"
    type: "prompt_agent"
    params:
      agent: "technical_writer_twitter"
      files_to_read:
        - "internal/agent_final.md"
      prompt: |
        The blog post that you need to write twitter thread to promote is in your clipboard.
      output_filename: "twitter_thread.md"

  - id: "agent_linkedin"
    type: "prompt_agent"
    params:
      agent: "technical_writer_linkedin"
      files_to_read:
        - "internal/agent_final.md"
      prompt: |
        The blog post that you need to write linkedin post to promote is in your clipboard.
      output_filename: "linkedin_post.md"

  - id: "agent_visual"
    type: "prompt_agent"
    params:
      agent: "technical_writer_visual"
      files_to_read:
        - "internal/agent_final.md"
      prompt: |
        The source material you need to work on is provided in your clipboard.
      output_filename: "visual_recommendations.md"

outputs:
  blog_post:
    description: "The final edited version of the article."
    value: "{{ steps.agent_editing.content }}"
  blog_post_output_path:
    description: "File path to the final markdown file."
    value: "{{ steps.agent_editing.file_path }}"
  twitter_thread:
    description: "Twitter thread of the article."
    value: "{{ steps.agent_twitter.content }}"
  linkedin_post:
    description: "LinkedIn post of the article."
    value: "{{ steps.agent_linkedin.content }}"
  visual_recs::
    description: "Recommendations for visuals."
    value: "{{ steps.agent_visual.content }}"
