name: "Sample Multi-Step Agent Workflow"
description: "A simple multi-step workflow to test agent integration."
version: "1.0"

inputs:
  writing_topic:
    type: "string"
    description: "The topic you want the agent to write about."
    default: "Python monorepo."
  content_length:
    type: "int"
    description: "Target word count."
    default: 500

steps:
  - id: "agent_outline"
    type: "prompt_agent"
    params:
      agent: "technical_writer_outline"
      prompt: |
        Create a detailed outline for a technical article about {{ inputs.writing_topic }}.
        Ensure it is structured for a {{ inputs.content_length }} word article.
        Only write the content of the outline in your output.
      output_filename: "agent_outline.md"

  - id: "agent_drafting"
    type: "prompt_agent"
    params:
      agent: "technical_writer_draft"
      prompt: |
        Please write the article based on the outine below. Target length is {{ inputs.content_length }} words. 
        
        {{ steps.agent_outline.content }}
      output_filename: "agent_draft.md"

  - id: "agent_editing"
    type: "prompt_agent"
    params:
      agent: "technical_writer_editor"
      prompt: |
        Review and polish the following draft:
        
        {{ steps.agent_drafting.content }}
        
        Target length is {{ inputs.content_length }} words. 
      output_filename: "agent_final.md"

  - id: "agent_twitter"
    type: "prompt_agent"
    params:
      agent: "technical_writer_twitter"
      prompt: |
        Source Material:
        {{ steps.agent_editing.content }}
      output_filename: "twitter_thread.md"

  - id: "agent_linkedin"
    type: "prompt_agent"
    params:
      agent: "technical_writer_linkedin"
      prompt: |
        Source Material:
        {{ steps.agent_editing.content }}
      output_filename: "linkedin_post.md"

  - id: "agent_visual"
    type: "prompt_agent"
    params:
      agent: "technical_writer_visual"
      prompt: |
        Source Material:
        {{ steps.agent_editing.content }}
      output_filename: "visual_recommendations.md"

outputs:
  blog_post:
    description: "The final edited version of the article."
    value: "{{ steps.agent_editing.content }}"
  blog_post_output_path:
    description: "File path to the final markdown file."
    value: "{{ steps.agent_editing.file_path }}"
  twitter_thread:
    description: "Twitter thread of the article."
    value: "{{ steps.agent_twitter.content }}"
  linkedin_post:
    description: "LinkedIn post of the article."
    value: "{{ steps.agent_linkedin.content }}"
  visual_recs::
    description: "Recommendations for visuals."
    value: "{{ steps.agent_visual.content }}"
